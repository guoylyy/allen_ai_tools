# 宝宝成长日报微信机器人 🤖

基于 Wechaty + wechat4u 实现的个人微信机器人，每日自动向微信群发送宝宝成长日报。

## 功能特点

- 📱 **个人微信登录** - 无需企业微信，使用个人微信即可
- 📊 **每日自动推送** - 每天早上 8 点自动发送前一天的日报
- 👶 **多宝宝支持** - 支持多个孩子的成长记录
- 📝 **详细日报内容** - 包含睡眠、饮食、玩耍、学习等各类记录统计
- 🎯 **微信群发送** - 自动向指定微信群发送日报
- 🔧 **手动触发** - 发送"日报"指令可手动触发发送

## 环境要求

- Node.js >= 14.0.0
- MySQL >= 5.7
- 个人微信账号

## 快速开始

### 1. 安装依赖

```bash
cd wechat-bot
npm install
```

### 2. 配置环境变量

复制 `.env.example` 为 `.env` 并修改配置：

```bash
# 数据库配置
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=baby_growth
DB_PORT=3306

# 微信群配置（多个群用逗号分隔）
WECHAT_GROUP_NAMES=宝宝成长记录,家庭群

# 发送时间（每天早上8点）
REPORT_HOUR=8
REPORT_MINUTE=0
```

### 3. 启动机器人

```bash
# 方式1: 使用启动脚本
chmod +x start.sh
./start.sh

# 方式2: 直接运行
node index.js
```

### 4. 登录微信

启动后，终端会显示一个二维码，使用微信扫描即可登录。

## 使用说明

### 自动发送

每天早上 8 点（可在 `.env` 中配置）会自动向指定微信群发送前一天的日报。

### 手动发送

在微信中向机器人发送以下指令：

- `日报` - 手动触发发送当天日报
- `报告` - 手动触发发送当天日报
- `测试` - 手动触发发送测试消息
- `状态` - 查看机器人状态

## 日报内容示例

```
📅 2026年2月23日 星期日
━━━━━━━━━━━━━━━━━━━━━
【郭路谦 - 昨日成长日报】

🌙 睡眠：2次，共3小时30分钟
🍼 饮食：5次
🎈 玩耍：3次
📚 学习：1次，共20分钟
💊 营养补充：2次

📝 详细记录：
1. 🌙08:30 睡眠 - 2小时30分钟
2. 🍼11:00 饮食 - 奶粉180ml
3. 🎈14:00 玩耍 - 玩积木
...

⭐ 今日记录共12条，宝宝表现很棒！
━━━━━━━━━━━━━━━━━━━━━
💕 关注宝宝成长，记录美好瞬间
```

## 技术栈

- [Wechaty](https://wechaty.js.org/) - 微信机器人 SDK
- [wechat4u](https://github.com/nodeWechat/wechat4u) - 微信网页版协议
- [node-cron](https://www.npmjs.com/package/node-cron) - 定时任务
- [mysql2](https://www.npmjs.com/package/mysql2) - MySQL 客户端

## 注意事项

1. **微信登录限制**: 微信网页版登录有时效性，可能需要定期重新扫码
2. **发送频率**: 建议合理控制发送频率，避免被微信风控
3. **数据安全**: 请妥善保管数据库密码和微信登录状态

## 常见问题

### Q: 扫码后提示登录失败
A: 微信网页版可能存在登录限制，请尝试重启微信或重新扫码

### Q: 找不到微信群
A: 请确保群名称完全匹配，或先在微信中搜索一下群名称

### Q: 定时任务不执行
A: 检查服务器时区是否正确，确保 cron 表达式配置无误

## 许可证

MIT License
